 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -4288,51 +4288,51 @@ function editCombinedNotes(contentElement, existingText) {
       textarea.style.fontSize   = '32px';
       textarea.style.lineHeight = '1.3';
     }
   })();
 
   // Replace the contentElement with the textarea
   var parent = contentElement.parentNode;
   parent.replaceChild(textarea, contentElement);
 
   // Ensure proper height
   setTimeout(function(){ adjustTextareaHeight(textarea); }, 0);
   textarea.addEventListener('input', function(){ adjustTextareaHeight(this); });
 
   textarea.addEventListener('blur', function() {
     var newText = textarea.value;
     if (newText !== existingText) {
       if (confirm('Save changes to NOTES (Column C)?')) {
         var clientName = document.getElementById('clientSelect').value;
         showLoadingBar();
         google.script.run
           .withSuccessHandler(function() {
             hideLoadingBar();
             alert('Notes updated successfully.');
             // Refresh the client view + top clients
             showClientNotes();
-            displayTopClients();
+            retriggerTopClientsFilter();
             // Optionally send an edit summary (Column C)
             google.script.run.sendEditSummaryEmail(clientName, 'pastWork', existingText, newText);
           })
           .withFailureHandler(function(error) {
             hideLoadingBar();
             alert('Error saving edits: ' + error.message);
             // Rebuild the UI (without changes)
             showClientNotes();
           })
           .updateNotes(clientName, 'pastWork', newText); // <-- COLUMN C ONLY
       } else {
         // Rebuild the UI (no changes)
         showClientNotes();
       }
     } else {
       // No changes; rebuild
       showClientNotes();
     }
   });
 
   textarea.focus();
   textarea.selectionStart = textarea.selectionEnd = textarea.value.length;
 }
 
 
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -4418,52 +4418,52 @@ function normalizeChipDate(raw) {
 
 function showCalendarInput() {
     var calendarSection = document.getElementById('calendarInputSection');
     if (calendarSection.style.display === 'none' || calendarSection.style.display === '') {
         calendarSection.style.display = 'block';
     } else {
         calendarSection.style.display = 'none';
     }
 }
 
 function submitPastWork() {
     var clientName = document.getElementById('clientSelect').value;
     var pastWorkContent = document.getElementById('newPastWork').value;
 
     // Show the loading bar
     showLoadingBar();
 
     // Update past work on the server
     google.script.run.withSuccessHandler(function(wasUpdated) {
         if (wasUpdated) {
 showStarAnimation(); // SNIPPET #3
 
 
             alert('Past work updated successfully.');
 
-             // Refresh the Top Clients list
-            displayTopClients(); // Add this line
+            // Refresh the Top Clients list
+            retriggerTopClientsFilter();
 
             // Fetch the updated client data
             google.script.run.withSuccessHandler(function(clients) {
                 // Update your clients data and re-display the top clients
                 showTopClients(clients);
             }).getTopClients();
 
             // Optionally, refresh the notes for the selected client
             showClientNotes();
 
             // Send an email notification if needed
             google.script.run.sendEmailNotification(clientName, pastWorkContent);
         } else {
             alert('Failed to update past work. Please try again.');
         }
         document.getElementById('newPastWork').value = ''; // Clear the textarea
 
         // Hide the loading bar after processing is complete
         hideLoadingBar();
     }).updatePastWork(clientName, pastWorkContent);
 }
 
 
 
 
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -4475,79 +4475,79 @@ function addEventToCalendar(clientName, futureWorkDate, futureWorkContent) {
         alert(response); // Display the returned message
     }).addEventToCalendar(clientName, futureWorkDate, futureWorkContent);
 }
 
 
 
 
 
 
    // Modified updateCategory function
 function updateCategory() {
     var clientName = document.getElementById('clientSelect').value;
     var newCategory = document.getElementById('categorySelect').value;
 
     // Clear the client notes display area
     document.getElementById('notesDisplay').innerHTML = '';
     document.getElementById('notesDisplay').style.display = 'none';
 
     showLoadingBar(); // Show the loading bar
 
     google.script.run.withSuccessHandler(function(updated) {
         hideLoadingBar(); // Hide the loading bar
         if (updated) {
             alert('Category updated successfully.');
             refreshUIWithNewCategory(clientName, newCategory); // Refresh UI with new category
-            displayTopClients(); // Refresh the top clients list
+            retriggerTopClientsFilter(); // Refresh the top clients list
         } else {
             alert('Failed to update category. Please try again.');
         }
     }).updateCategory(clientName, newCategory);
 }
 
 // Re-apply the current dropdown filter after any category change/save
 function retriggerTopClientsFilter(){
   var dd = document.getElementById('topClientsFilterDropdown');
   var current = (dd && dd.value) ? dd.value : 'JB';
   if (typeof handleTopClientsFilterChange === 'function') {
     handleTopClientsFilterChange(current);
   } else if (typeof syncClientsListToDropdown === 'function') {
     // Fallback: full sync
     syncClientsListToDropdown();
   }
 }
 
 
 
 // Refresh UI with new category
 function refreshUIWithNewCategory(clientName, newCategory) {
     // Call server-side function to get updated client list
     google.script.run.withSuccessHandler(function(clients) {
         clientsData = clients; // Update clientsData
         populateClientDropdown(clients); // Update the client dropdown
         selectUpdatedClient(clientName, newCategory); // Select the updated client
-        displayTopClients(); // Refresh the top clients list
+        retriggerTopClientsFilter(); // Refresh the top clients list
     }).getAllClientsData(); 
 }
 
 
 // Select the updated client in the dropdown and reload notes
 function selectUpdatedClient(clientName, newCategory) {
     var clientSelect = document.getElementById('clientSelect');
     var clientAutocomplete = document.getElementById('clientAutocomplete');
     var updatedClientText = clientName + ' (' + newCategory + ')';
 
     // Set the clientSelect value to the clientName
     clientSelect.value = clientName;
 
     // Update the clientAutocomplete value to include the new category
     clientAutocomplete.value = updatedClientText;
 
     // Reload the notes for the selected client
     showClientNotes();
 }
 
 
 // Rest of your existing functions...
 
 
 function displayTimeSensitiveTasks() {
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -4677,51 +4677,51 @@ function extractBaseName(clientName) {
           console.log('After alert');
 
         })
         .withFailureHandler(function(error) {
           console.error('Error fetching client data:', error);
           alert('Error fetching client data. Please try again.');
         })
         .getAllClientsData();
 
     })
     .withFailureHandler(function(error) {
       console.error('Error adding new client:', error);
       alert('Error adding new client. Please try again.');
     })
     .addNewClientWithPastWork(clientName, futureWorkNote, category, pastWork);
 }
 
 
 
 
 
 
 
 // Function triggered by the "TOP PRIORITY CLIENTS" button
 function displayTopClients() {
-  displayFilteredClients('JB'); // Show strictPast (Immediate) clients by default
+  retriggerTopClientsFilter();
 }
 
 // This function is triggered by the quadrant buttons
 function displayFilteredClients(filter) {
     showLoadingBar(); // Show loading indication
     google.script.run.withSuccessHandler(function(result) {
         showTopClients(result, filter);
         hideLoadingBar(); // Hide loading indication
 
         // Get today's date in the required format
         var today = new Date();
         var options = { weekday: 'short', month: 'short', day: 'numeric', year: 'numeric' };
         var formattedDate = today.toLocaleDateString('en-US', options).toUpperCase();
 
         // Initialize titles
         var dateTitle = '';
         var topClientsTitle = '';
 
         // Set titles based on the filter
       // SNIPPET: ALWAYS SHOW DATE
 // Set topClientsTitle based on the filter, but ALWAYS set dateTitle to today's date
 dateTitle = formattedDate; 
 switch (filter) {
     case 'strictPast':
         topClientsTitle = 'TOP CLIENTS:';
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -5073,51 +5073,51 @@ function saveAllClientData() {
 
     var saveOperations = []; // To keep track of save operations
 
     for (var i = 0; i < clientDivs.length; i++) {
         var clientDiv = clientDivs[i];
         var clientName = clientDiv.querySelector('button.inline-button').innerText; // Assuming the client's name is in the button
         var textBox = clientDiv.querySelector('input[type="text"]');
         var newData = textBox.value;
 
         // Save each client's data
         (function(clientName, newData) {
             saveOperations.push(new Promise(function(resolve, reject) {
                 google.script.run.withSuccessHandler(function() {
                     resolve(); // Resolve the promise when data is successfully saved
                 }).withFailureHandler(function() {
                     reject(); // Reject the promise if there's an error
                 }).updateClientData(clientName, newData);
             }));
         })(clientName, newData);
     }
 
     // Wait for all save operations to complete before refreshing
     Promise.all(saveOperations).then(function() {
         hideLoadingBar(); // Hide loading bar on success
         alert('All data saved successfully.'); // Notify the user
-        displayTopClients(); // Refresh the display for top clients
+        retriggerTopClientsFilter(); // Refresh the display for top clients
     }).catch(function() {
         hideLoadingBar(); // Hide loading bar in case of error
         alert('An error occurred while saving the data.'); // Notify the user about the error
     });
 }
 
 
 
 
 
 
 
 
 // This function smoothly scrolls the window to the top
 function scrollToTop() {
     window.scrollTo({
         top: 0,
         left: 0,
         behavior: 'smooth'
     });
 }
 
 
 
 
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -5479,51 +5479,51 @@ function handleUserSelectionChange() {
 
 function submitFutureWork() {
     var userSelection = document.getElementById('userSelection').value;
     var clientName = document.getElementById('clientSelect').value;
     var futureWorkText = document.getElementById('newFollowUp').value;
     var futureWorkDate = document.getElementById('futureWorkDate').value;
 
     // Show loading bar
     showLoadingBar();
 
     // Check if user is 'JB' or 'Ricky' and no date is entered
     if ((userSelection === 'JB' || userSelection === 'Ricky') && !futureWorkDate) {
         alert('Please enter a date for future work.');
         hideLoadingBar(); // Hide loading bar if validation fails
         return; // Stop execution of the function
     }
 
     // Call server-side function asynchronously
     google.script.run.withSuccessHandler(function(response) {
         alert('Future work added successfully to follow-up notes.');
         document.getElementById('newFollowUp').value = '';
         document.getElementById('futureWorkDate').value = '';
 
 
         // Refresh the Top Clients list
-        displayTopClients(); // Add this line
+        retriggerTopClientsFilter();
 
         // Refresh client notes
         showClientNotes();
 
         // Send email notification
         google.script.run.sendEmailNotification(clientName, futureWorkText);
 
         // If JB is selected and date is provided, create a task in JB's calendar
         if (userSelection === 'JB' && futureWorkDate) {
             addEventToCalendar(clientName, futureWorkDate, futureWorkText);
         }
 
         // If Ricky is selected and date is provided, create a task in Ricky's calendar
         if (userSelection === 'Ricky' && futureWorkDate) {
             addEventToRickyCalendar(clientName, futureWorkDate, futureWorkText);
         }
 
         hideLoadingBar(); // Hide loading bar after successful execution
     }).withFailureHandler(function(error) {
         alert('Error updating follow-up note.');
         hideLoadingBar(); // Hide loading bar also in case of failure
     }).updateFollowUp(clientName, futureWorkText, futureWorkDate, userSelection);
 }
 
 
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -6168,87 +6168,87 @@ function populateCategoryDropdown(categories) {
       }
       if (this.value) {
         updateCategory();                 // <- saves to sheet
         if (typeof updateCategoryLabel === 'function') updateCategoryLabel();
       }
     });
     sel._wiredChange = true;
   }
 }
 
 
 
 
 // Call the function at the end of the script to automatically execute it on page load
 // displayTopClients();
 
 function updateClientColumnBFromNotes(newValue) {
   var clientName = document.getElementById('clientSelect').value;
 
   showLoadingBar();
 
   google.script.run
     .withSuccessHandler(function() {
       hideLoadingBar();
       // Refresh the top clients display
-      displayTopClients();
+      retriggerTopClientsFilter();
     })
     .withFailureHandler(function(error) {
       hideLoadingBar();
       alert('Failed to update Column B: ' + error);
     })
     .updateClientColumnB(clientName, newValue);
 }
 
 function updateClientColumnDFromNotes(newValue) {
   var clientName = document.getElementById('clientSelect').value;
 
   showLoadingBar();
 
   google.script.run
     .withSuccessHandler(function() {
       hideLoadingBar();
       // Refresh the top clients display
-      displayTopClients();
+      retriggerTopClientsFilter();
     })
     .withFailureHandler(function(error) {
       hideLoadingBar();
       alert('Failed to update Column D: ' + error);
     })
     .updateClientColumnD(clientName, newValue);
 }
 
 
 
 
 function saveClientData(clientName, newData) {
     showLoadingBar(); // Optionally show a loading indicator
 
     google.script.run.withSuccessHandler(function() {
         hideLoadingBar(); // Hide loading bar on success
         alert('Data saved successfully.'); // Notify the user
-        displayTopClients(); // Refresh the display for top clients
+        retriggerTopClientsFilter(); // Refresh the display for top clients
     }).updateClientData(clientName, newData); // Implement this Google Apps Script function
 }
 
 function toggleAdvanced() {
     var container = document.getElementById('advancedContainer');
     if (container.style.display === 'none') {
         container.style.display = 'block';
     } else {
         container.style.display = 'none';
     }
 }
 
 function toggleGraphs() {
     var container = document.getElementById('graphsContainer');
     container.style.display = container.style.display === 'none' ? 'block' : 'none';
 }
 
 function filterClients(day) {
   google.script.run.withSuccessHandler(displayClients).getTopClientsByDay(day);
 }
 
 function displayClients(clients) {
   const displayArea = document.getElementById('clientDisplay');
   displayArea.innerHTML = ''; // Clear previous entries
   clients.forEach(client => {
diff --git a/Index.html b/Index.html
index c1d3bb8a5371e8914ee1adaa8c30a1fa696e652a..320a8dc080d5e598d92348a8298104c1069aad2e 100644
--- a/Index.html
+++ b/Index.html
@@ -7525,52 +7525,52 @@ function openChipEditor(anchorEl, clientName, initials, mmddyy) {
 
   // helper: run save with current select + date values
   function saveChipAndClose() {
     var newInitials = sel.value;
     var newIso = dateInput.value || ''; // '' allowed
 
     // Show loading, save, update chip, close editor
     showLoadingBar();
     google.script.run.withSuccessHandler(function(){
       hideLoadingBar();
 
       // Convert ISO → MM/DD/YY for chip display
       var newMmddyy = '';
       if (newIso) {
         var d = new Date(newIso);
         newMmddyy = (d.getMonth()+1).toString().padStart(2,'0') + '/' +
                     d.getDate().toString().padStart(2,'0') + '/' +
                     (d.getFullYear()%100).toString().padStart(2,'0');
       }
 
       renderChipInto(anchorEl, clientName, newInitials, newMmddyy);
       closeAnyChipEditor();
       // ---- NEW: ensure BOTH chip instances refresh ----
 try {
   // Refresh the Top Clients list (updates chips inside More/Less cards)
-  if (typeof displayTopClients === 'function') {
-    displayTopClients();
+  if (typeof retriggerTopClientsFilter === 'function') {
+    retriggerTopClientsFilter();
   }
 
   // If the currently loaded notes belong to this client, refresh them too
   var sel = document.getElementById('clientSelect');
   if (sel && sel.value && sel.value.trim() === clientName.trim()) {
     if (typeof showClientNotes === 'function') {
       showClientNotes();
     }
   }
 } catch (e) {
   console.warn('Post-save refresh warning:', e);
 }
 
     }).withFailureHandler(function(err){
       hideLoadingBar();
       alert('Failed to update chip: ' + err.message);
     }).updateClientChip(clientName, newInitials, newIso || null);
   }
 
   // AUTO-SAVE behaviors:
   // 1) Change initials → save immediately
   sel.addEventListener('change', saveChipAndClose);
   // 2) Pick a date → save immediately
   dateInput.addEventListener('change', saveChipAndClose);
   // 3) Click outside the popover → close without saving (no change made)
 
EOF
)
